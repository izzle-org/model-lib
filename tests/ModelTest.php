<?php
namespace Izzle\Tests;

use Izzle\Model\Model;
use Izzle\Model\PropertyCollection;
use PHPUnit\Framework\TestCase;

class ModelTest extends TestCase
{
    /**
     * @var Book
     */
    protected $book;
    
    public function setUp()
    {
        parent::setUp(); // TODO: Change the autogenerated stub
    
        $this->book = new Book([
            'id' => 3,
            'name' => 'Moby Dick',
            'stock_level' => '4'
        ]);
    }
    
    public function testCanBeCreatedWithData(): void
    {
        $this->assertInstanceOf(
            Model::class,
            $this->book
        );
        
        $this->assertEquals($this->book->getName(), 'Moby Dick');
        $this->assertEquals($this->book->getStockLevel(), 4);
    }
    
    public function testCanGetProperties(): void
    {
        $this->assertCount(3, $this->book->properties()->toArray());
    }
    
    public function testCanGetPropertyByName(): void
    {
        $property = $this->book->property('name');
        
        $this->assertNotEmpty($property);
        $this->assertEquals('name', $property->getName());
    }
}
